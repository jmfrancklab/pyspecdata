<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>the fitdata class &mdash; pySpecData 0.9.5.3.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="_static/gallery_custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Figure List" href="figlist.html" />
    <link rel="prev" title="Documentation of Notebook Helper Functions" href="latexscripts.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pySpecData
          </a>
              <div class="version">
                0.9.5.3.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="modules.html">List of Modules and Sub-Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebook.html">LaTeX Notebook Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="nddata.html">ND-Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">the fitdata class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-new-types-of-fitdata-modules">creating new types of fitdata modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="figlist.html">The Figure List</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">PySpecData Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html#individual-functions">Individual Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html#matplotlib-examples">Matplotlib Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html#text-only-examples">Text-Only Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pySpecData</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>the fitdata class</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/fitdata.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-fitdata-class">
<h1>the fitdata class<a class="headerlink" href="#the-fitdata-class" title="Permalink to this headline">¶</a></h1>
<p>This is a child class of nddata used for fitting.</p>
<p>For old fitdata documentation
(obsolete, for development reference) see <span class="xref std std-ref">fitdata_old</span></p>
<section id="creating-new-types-of-fitdata-modules">
<h2>creating new types of fitdata modules<a class="headerlink" href="#creating-new-types-of-fitdata-modules" title="Permalink to this headline">¶</a></h2>
<p>There is a base class called “fitdata” that defines the basic routines
necessary for fitting. Currently, the fitdata class only supports
fitting along one dimension, so before constructing a new class, one
must first choose what dimension they will be fitting along.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Of
course, for multidimensional data, the fit will be repeated along the
dimensions that are not the fit dimension. see how easy it would be to
allow more than one dimension</p>
</div>
<p>To fit a new type of function, one simply creates a new type of class
that <em>inherits</em> from the fitdata class. We override all the methods that
have to do with the definition of the functional format. These are
defined in the first section, where we build up an example for fitting a
general <span class="math notranslate nohighlight">\(T_1\)</span> recovery curve. This example should be used as a
starting point for making new fit classes. Then, we can make instances
of the new class, and use their methods (described in the subsequent
section) next.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>the option block :no-inherited-members: doesn’t work – not sure how to modify class.rst
I put a template from stackexchange inside _templates
– see <a class="reference external" href="https://stackoverflow.com/questions/28147432/how-to-customize-sphinx-ext-autosummary-rst-template">https://stackoverflow.com/questions/28147432/how-to-customize-sphinx-ext-autosummary-rst-template</a>
on how to use it</p>
<p>then, I need to link to or include generated/pyspecdata.core.fitdata.rst</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pyspecdata.core.</span></span><span class="sig-name descname"><span class="pre">fitdata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Inherits from an nddata and enables curve fitting through use of a sympy expression.</p>
<p>The user creates a fitdata class object from an existing nddata
class object, and on this fitdata object can define the
<a class="reference internal" href="#pyspecdata.core.fitdata.functional_form" title="pyspecdata.core.fitdata.functional_form"><code class="xref py py-func docutils literal notranslate"><span class="pre">functional_form()</span></code></a> of the curve it would like to fit to the
data of the original nddata.
This functional form must be provided as a sympy expression, with
one of its variables matching the name of the dimension that the
user would like to fit to.
The user provides fit coefficients using <code class="xref py py-func docutils literal notranslate"><span class="pre">fit_coeff()</span></code> and
obtains output using <a class="reference internal" href="#pyspecdata.core.fitdata.fit" title="pyspecdata.core.fitdata.fit"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit()</span></code></a> and <a class="reference internal" href="#pyspecdata.core.fitdata.eval" title="pyspecdata.core.fitdata.eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a>.</p>
<p>If you haven’t done this before,
create a jupyter notebook (not checked in, just for your own playing around) with:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">import</span> <span class="pre">sympy</span> <span class="pre">as</span> <span class="pre">s</span>
<span class="pre">s.init_printing()</span>
<span class="pre">`</span></code>
you can then use <cite>s.symbols(</cite> to create symbols/variables that
allow you to build the mathematical expression for your fitting
function</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.analytical_covariance">
<span class="sig-name descname"><span class="pre">analytical_covariance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.analytical_covariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Not up to date</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a full copy of this instance.</p>
<p>Because methods typically change the data in place, you might want to
use this frequently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>boolean</em>) – <p>Default to True.
False doesn’t copy the data – this is for internal use,
<em>e.g.</em> when you want to copy all the metadata and perform a
calculation on the data.</p>
<p>The code for this also provides the definitive list of the
nddata metadata.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.covar">
<span class="sig-name descname"><span class="pre">covar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.covar" title="Permalink to this definition">¶</a></dt>
<dd><p>give the covariance for the different symbols</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">taxis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.eval" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate the fit function along the axis taxis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>taxis</strong> (<em>ndarray</em><em>, </em><em>int</em>) – <dl class="field-list simple">
<dt class="field-odd">if ndarray</dt>
<dd class="field-odd"><p>the new axis coordinates along which we want to calculate the fit.</p>
</dd>
<dt class="field-even">if int</dt>
<dd class="field-even"><p>number of evenly spaced points along the t-axis along the fit</p>
</dd>
</dl>
</p></li>
<li><p><strong>set_what</strong> (<em>'str'</em><em>, </em><em>optional</em>) – forcibly sets a specific symbol</p></li>
<li><p><strong>set_to</strong> (<em>double</em><em>, </em><em>optional</em>) – the specific value (int) you are assigning the symbol you included</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>self</strong> – the fit function evaluated along the axis coordinates that were passed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="generated/pyspecdata.core.nddata.html#pyspecdata.core.nddata" title="pyspecdata.core.nddata">nddata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">set_what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_analytical</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>actually run the fit</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.fitfunc">
<span class="sig-name descname"><span class="pre">fitfunc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.fitfunc" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the function that does the actual fitting, and takes a properly ordered list of parameters as well as an np.ndarray for the x axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.function_string">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">function_string</span></span><a class="headerlink" href="#pyspecdata.core.fitdata.function_string" title="Permalink to this definition">¶</a></dt>
<dd><p>A property of the fitdata class which stores a string
output of the functional form of the desired fit expression
provided in func:<cite>functional_form</cite> in LaTeX format</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.functional_form">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">functional_form</span></span><a class="headerlink" href="#pyspecdata.core.fitdata.functional_form" title="Permalink to this definition">¶</a></dt>
<dd><p>A property of the fitdata class which is set by the user,
takes as input a sympy expression of the desired fit
expression</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.gen_indices">
<span class="sig-name descname"><span class="pre">gen_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">this_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_to</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.gen_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>pass this this_set and this_set_to parameters, and it will return:
indices,values,mask
indices –&gt; gives the indices that are forced
values –&gt; the values they are forced to
mask –&gt; p[mask] are actually active in the fit</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.guess">
<span class="sig-name descname"><span class="pre">guess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_pseudoinverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.guess" title="Permalink to this definition">¶</a></dt>
<dd><p>old code that I am preserving here – provide the guess for our parameters; by default, based on pseudoinverse</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.latex">
<span class="sig-name descname"><span class="pre">latex</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.latex" title="Permalink to this definition">¶</a></dt>
<dd><p>show the latex string for the function, with all the symbols substituted by their values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.linear">
<span class="sig-name descname"><span class="pre">linear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.linear" title="Permalink to this definition">¶</a></dt>
<dd><p>return the linear-form function, either smoothly along the fit function, or on the raw data, depending on whether or not the taxis argument is given
can take optional arguments and pass them on to eval</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.output">
<span class="sig-name descname"><span class="pre">output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.output" title="Permalink to this definition">¶</a></dt>
<dd><p>give the fit value of a particular symbol, or a dictionary of all values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em><em> (</em><em>optional</em><em>)</em>) – name of the symbol.
If no name is passed, then output returns a dictionary of the
resulting values.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>retval</strong> – Either a dictionary of all the values, or the value itself.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict or float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.parameter_derivatives">
<span class="sig-name descname"><span class="pre">parameter_derivatives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xvals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.parameter_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p>return a matrix containing derivatives of the parameters, can set dict set, or keys set, vals set_to</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.residual">
<span class="sig-name descname"><span class="pre">residual</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.residual" title="Permalink to this definition">¶</a></dt>
<dd><p>just the residual (error) function</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.set_guess">
<span class="sig-name descname"><span class="pre">set_guess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_of_values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.set_guess" title="Permalink to this definition">¶</a></dt>
<dd><p>sets parameters to guess/estimated value to compare fit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dict_of_values</strong> (<em>dict</em>) – dictionary of values set to parameters in fit equation.
Allows for the setting of multiple variables depending on
what’s defined in this dictionary. The keys of the dictionary
must be sympy symbols</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>self</strong> – The modified nddata</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="generated/pyspecdata.core.nddata.html#pyspecdata.core.nddata" title="pyspecdata.core.nddata">nddata</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyspecdata.core.fitdata.settoguess">
<span class="sig-name descname"><span class="pre">settoguess</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyspecdata.core.fitdata.settoguess" title="Permalink to this definition">¶</a></dt>
<dd><p>a debugging function, to easily plot the initial guess</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="latexscripts.html" class="btn btn-neutral float-left" title="Documentation of Notebook Helper Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="figlist.html" class="btn btn-neutral float-right" title="The Figure List" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, John M. Franck.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>